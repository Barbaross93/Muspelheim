#!/bin/sh

# media-control is a script that acts like playerctl, but controls MPD
# instead of MPRIS if MPD is active.

active=$(mpc current | wc -l)

# If output is only one line, likely that mpd is actively playing
if [ $active -eq 1 ]; then
	# translate playerctl commands to mpc commands
	case "$1" in
	play-pause)
		mpc toggle
		;;
	previous)
		mpc prev
		;;
	*) mpc "$@" ;;
	esac
elif command -v playerctl >/dev/null; then
	playerctl "$@"
else
	# shellcheck disable=SC2016 # I don't want expansion in this string
	echo 'mpd is not running, and playerctl is not in your $PATH'
fi
