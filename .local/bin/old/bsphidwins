#!/bin/sh

windows=$(bspc query -N -n .window.hidden)
count=$(echo "$windows" | wc -l)
index="$(for i in "$(seq 1 $count)"; do printf "%s %s\n" $i "$(xdotool getwindowname $(echo "${windows}" | head -n "${i}" | tail -1))"; done | bemenu -p 'Hidden Windows:')" &&
	if [ "$index" = "" ]; then
		exit 0
	else
		num="${index%% *}"
		win=$(echo "${windows}" | head -n "$num" | tail -1)
		bspc node "${win}" -d $(bspc query -D -d)
		bspc node "${win}" -g hidden=off
	fi
