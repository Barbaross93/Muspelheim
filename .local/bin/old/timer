#!/bin/sh
#  simple timer
sound=/home/barbaross/.config/Old/pomo/sound.ogg

t=${1:-1h}
[ "$1" ] || set -- 1h 'command thing'
shift
calc() {
	seconds=$(echo "$1*$2" | bc)
}

case $t in
0 | 0s)
	notify-send -u critical "$*"
	exec mpv --really-quiet "$sound"
	;;
*h) calc "${t%?}" 3600 ;;
*m) calc "${t%?}" 60 ;;
*s) seconds="${t%?}" ;;
*) calc "$t" 60 ;;
esac

b="Timer set for $t ($seconds)"
notify-send "$b"
{
	sleep "$seconds"

	notify-send -u critical "Timer finished" "$*"
	mpv --really-quiet "$sound"
} &
