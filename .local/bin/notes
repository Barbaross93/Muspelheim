#!/bin/sh

readonly NOTES_FILE=~/Documents/personal/quick_notes

if [ ! -e "${NOTES_FILE}" ]; then
    echo "empty" >>"${NOTES_FILE}"
fi

get_notes() {
    cat ${NOTES_FILE}
}

main() {
    all_notes="$(get_notes)"

    note=$( (echo "${all_notes}") | ddmenu -p 'Notes:')
    matching=$( (echo "${all_notes}") | grep "^${note}$")

    if [ -n "${matching}" ]; then
        new_notes=$( (echo "${all_notes}") | grep -v "^${note}$")
    else
        new_notes=$( (echo "${all_notes}
${note}") | grep -v "^$")
    fi

    echo "${new_notes}" >"${NOTES_FILE}"
}

main
